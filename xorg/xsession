#!/bin/sh
isactivemon() { echo "$(xrandr --listactivemonitors | grep -c "$1")"; }

export XCURSOR_SIZE=24
export XCURSOR_PATH=/usr/local/lib/X11/icons
export XCURSOR_THEME=whiteglass

if [ `isactivemon DP-3` -eq 0 ]; then
	export GDK_SCALE=2
	export GDK_DPI_SCALE=0.5
	export QT_AUTO_SCREEN_SCALE_FACTOR=1
	export XCURSOR_SIZE=32
	xrdb -merge "$HOME/.config/x11/xresources-hidpi"
	xrandr --output eDP-1 --mode 2256x1504 --rate 60 --dpi 200
else
	unset GDK_SCALE
	unset GDK_DPI_SCALE
	unset QT_AUTO_SCREEN_SCALE_FACTOR
	export XCURSOR_SIZE=24
	xrdb -merge "$HOME/.config/x11/xresources"
	setxkbmap -layout de
	xrandr --dpi 109
	xrandr --output eDP-1 --off
	xrandr --output DP-3 --mode 2560x1080 --rate 75 --scale 1.15x1.15
	xrandr --output DP-4 --mode 2560x1440 --rate 75 --above DP-3
fi

xset b off
xset r rate 300 40
setxkbmap -layout us
xsetroot -solid "#1d2021"

xset s off
xset -dpms
xset s noblank 

exec dwm
